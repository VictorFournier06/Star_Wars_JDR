<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DATAPAD — Création de personnage</title>
  
  <!-- Styles -->
  <link rel="stylesheet" href="./css/main.css?v=20260106i" />
</head>

<body>
  <!-- Background Effects -->
  <div class="bg-img"></div>
  <div class="noise"></div>
  <div class="scan"></div>
  <div class="flicker" id="flicker"></div>
  <div class="refresh" id="refresh"></div>

  <div class="wrap">
    <!-- Header / HUD -->
    <header class="topbar" aria-label="Datapad HUD">
      <div class="brand">
        <div class="logo-container">
          <div class="logo-coin" aria-hidden="true">
            <div class="logo-face logo-republic"></div>
            <div class="logo-face logo-sith"></div>
          </div>
        </div>
        <div class="title">
          <div class="kicker">Datapad / Création</div>
          <h1>Création de personnage</h1>
        </div>
      </div>

      <div class="hud">
        <span class="stamp">Dossier joueur</span>
        <div class="meter" title="Points restants (≥ 0)">
          <span class="label">POINTS RESTANTS</span>
          <span class="value" id="totalVal">0</span>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="shell" aria-label="Datapad">
      <!-- Navigation -->
      <nav class="nav" aria-label="Navigation">
        <div class="tabs" id="tabs"></div>
        <div class="pager">
          <button class="btn" id="prevBtn">← Préc.</button>
          <button class="btn" id="nextBtn">Suiv. →</button>
          <button class="btn warn" id="resetBtn" title="Effacer la sélection">Réinitialiser</button>
        </div>
      </nav>

      <!-- Page 1: Espèce -->
      <section class="page" data-page="0">
        <div class="headline">
          <h2>1 — Espèce</h2>
        </div>
        <p class="hint">Tu choisis un profil culturel et physiologique. <strong>Survole l'image</strong> pour voir la description détaillée. Les détails mécaniques apparaissent dans le dossier final.</p>
        <div class="panel" id="speciesList"></div>
      </section>

      <!-- Page 2: Profession -->
      <section class="page" data-page="1">
        <div class="headline">
          <h2>2 — Profession</h2>
          <span class="chip amber">Points</span>
        </div>
        <p class="hint">Clique une carte pour choisir. Le chiffre indique l'impact sur tes <b>points restants</b>.</p>
        <div class="panel" id="profList"></div>
      </section>

      <!-- Page 3: Traits -->
      <section class="page" data-page="2">
        <div class="headline">
          <h2>3 — Traits</h2>
          <span class="chip amber">Points</span>
        </div>
        <p class="hint">Clique pour sélectionner/désélectionner. Ton total de <b>points restants</b> doit rester <b>≥ 0</b>.</p>
        <div class="panel">
          <div class="field">
            <label for="traitSearch">Rechercher</label>
            <input id="traitSearch" type="text" placeholder="Mot-clé (pilotage, réseau, guerre…)" />
          </div>
          <div class="traits" id="traitList"></div>
        </div>
      </section>

      <!-- Page 4: Morale -->
      <section class="page" data-page="3">
        <div class="headline">
          <h2>4 — Morale</h2>
          <span class="chip amber">Leviers MJ</span>
        </div>
        <p class="hint">Trois choix rapides qui définissent ta boussole morale. Pas de jugement : ce sont des <b>outils narratifs</b> pour le MJ.</p>
        
        <div class="grid3">
          <!-- Doctrine -->
          <div class="panel morale-panel">
            <h3 class="panel-title">Doctrine</h3>
            <p class="hint">Pourquoi tu te bats ?</p>
            <div class="morale-options" id="doctrineList"></div>
          </div>
          
          <!-- Méthodes -->
          <div class="panel morale-panel methodes-panel">
            <h3 class="panel-title">Méthodes</h3>
            <p class="hint">Comment tu opères ? <span class="muted">— Du plus propre au plus sale.</span></p>
            <div class="methodes-wrapper">
              <div class="morale-options methodes" id="methodesList"></div>
              <div class="methodes-spectrum">
                <span class="spec-light"></span>
                <span class="spec-gray"></span>
                <span class="spec-dark"></span>
              </div>
            </div>
          </div>
          
          <!-- Ligne rouge -->
          <div class="panel morale-panel lignes-panel">
            <h3 class="panel-title">Lignes rouges</h3>
            <p class="hint">Ce que tu refuses absolument ? <span class="muted">— Choisis autant que tu veux.</span></p>
            <div class="morale-options lignes" id="lignesList"></div>
          </div>
        </div>
      </section>

      <!-- Page 5: Identité -->
      <section class="page" data-page="4">
        <div class="headline">
          <h2>5 — Identité</h2>
          <span class="chip amber">Dossier</span>
        </div>
        <p class="hint">Tu verrouilles l'essentiel. Pas de roman : une identité jouable en 30 secondes.</p>
        <div class="grid2">
          <div class="panel">
            <div class="field">
              <label for="playerName">Nom du joueur</label>
              <input id="playerName" type="text" placeholder="Ton vrai prénom ou pseudo" />
            </div>
            <div class="field">
              <label for="codename">Nom de code</label>
              <input id="codename" type="text" placeholder="Ex : VELIN / K-17 / SABLE" />
            </div>
            <div class="field">
              <label for="concept">Concept (1 phrase)</label>
              <input id="concept" type="text" placeholder="Ex : technicien de flotte affecté aux missions impossibles" />
            </div>
            <div class="field">
              <label for="notes">Notes (optionnel)</label>
              <textarea id="notes" placeholder="Accents, attitude, objectifs, dettes, promesses…"></textarea>
            </div>
          </div>
          <div class="panel">
            <div class="field">
              <label>Camp</label>
              <div class="custom-select" id="affSelect">
                <div class="custom-select-trigger" tabindex="0">
                  <span class="custom-select-value">— Choisis —</span>
                  <span class="custom-select-arrow">▼</span>
                </div>
                <div class="custom-select-options">
                  <div class="custom-select-option" data-value="République">
                    <span class="option-icon republic">◆</span> République
                  </div>
                  <div class="custom-select-option" data-value="Empire Sith">
                    <span class="option-icon sith">◆</span> Empire Sith
                  </div>
                  <div class="custom-select-option" data-value="Indépendant">
                    <span class="option-icon neutral">◆</span> Indépendant
                  </div>
                  <div class="custom-select-option" data-value="Double agent">
                    <span class="option-icon double">◆</span> Double agent
                  </div>
                </div>
                <input type="hidden" id="aff" name="aff" value="">
              </div>
            </div>
            <p class="hint" style="margin-top:10px">Tu peux changer de camp en campagne. Ici, c'est ton point de départ.</p>
          </div>
        </div>
      </section>

      <!-- Page 6: Dossier final -->
      <section class="page" data-page="5" id="finalPage">
        <div class="headline">
          <h2>6 — Dossier final</h2>
          <span class="chip" id="statusChip">En cours</span>
        </div>
        <p class="hint">Cette page révèle les informations mécaniques. Si tes <b>points restants ≥ 0</b>, ton personnage est jouable.</p>

        <div class="summary" id="finalCapture">
          <!-- Summary Panel -->
          <div class="panel">
            <div class="headline" style="margin-bottom:6px">
              <h2 style="font-size:13px">Résumé</h2>
              <span class="chip" id="totalChip">POINTS 0</span>
            </div>
            <ul class="list" id="summary"></ul>
          </div>

          <!-- Stats Panel -->
          <div class="panel">
            <div class="headline" style="margin-bottom:6px">
              <h2 style="font-size:13px">Caractéristiques</h2>
              <span class="chip">calculé</span>
            </div>
            <p class="hint" style="margin-top:0">Base 10 + modificateurs (espèce, profession, traits).</p>
            <div class="grid2" style="margin-top:12px" id="statsGrid"></div>
          </div>

          <!-- Skills Panel -->
          <div class="panel">
            <div class="headline" style="margin-bottom:6px">
              <h2 style="font-size:13px">Compétences</h2>
              <span class="chip">révélé</span>
            </div>
            <p class="hint" style="margin-top:0">Compétences générales (espèce + profession).</p>
            <ul class="list" id="skillsList"></ul>
          </div>

          <!-- Export Panel -->
          <div class="panel export-section" id="exportPanel">
            <div class="headline" style="margin-bottom:6px">
              <h2 style="font-size:13px">Exporter</h2>
              <span class="chip">image</span>
            </div>
            <p class="hint" style="margin-top:0">Télécharge une image PNG ou envoie ton personnage au MJ.</p>
            <div class="footer-actions">
              <button class="btn" id="saveBtn">Télécharger l'image</button>
              <button class="btn btn-submit" id="submitBtn">Envoyer au MJ</button>
            </div>
            <p class="hint submit-status" id="submitStatus" style="margin-top:8px; display:none;"></p>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="./js/data.js?v=20260106f"></script>
  <script src="./js/utils.js?v=20260106f"></script>
  <script src="./js/tooltip.js?v=20260106f"></script>
  <script src="./js/effects.js?v=20260106f"></script>
  <script src="./js/app.js?v=20260106f"></script>
</body>
</html>
